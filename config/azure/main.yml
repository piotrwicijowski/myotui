name: Azure
modes:
- name: normal
- name: normal_ro
buffers:

- !vbox
  name: root
  description: Root view
  bindings:
  # - name: open_resource_groups
  #   description: Open Resource Groups
  #   triggers:
  #   - "key <ControlR>"
  #   actions:
  #   - "/root/body/main.open"
  - name: replace_with_subscriptions
    description: Replace main with with subscriptions
    triggers:
    - "key rsub"
    actions:
    - "/root/body/main.replace subscriptions"
  - name: clear_key_stack
    description: Clear key chord stack
    triggers:
    - "key <Esc>"
    actions:
    - "clearKeyStack"
  - name: close_current_buffer
    description: Open Resources for Logic Apps
    triggers:
    - "key q"
    actions:
    - "/close"
  - name: close_view
    description: Close current view
    triggers:
    - "key Q"
    - "key <ControlC>"
    actions:
    - "quit"
  - name: focus_right
    description: Focus Right View
    scope: "/**"
    triggers:
    - "key <ControlL>"
    - "key gl"
    actions:
    - "/focusRight"
  - name: focus_left
    description: Focus Right View
    triggers:
    - "key <Backspace>"
    - "key gh"
    actions:
    - "/focusLeft"
  - name: focus_up
    description: Focus Up View
    triggers:
    - "key <ControlK>"
    - "key gk"
    actions:
    - "/focusUp"
  - name: focus_down
    description: Focus Down View
    scope: "/**"
    triggers:
    - "key <ControlJ>"
    - "key gj"
    actions:
    - "/focusDown"
  - name: line_up
    description: Focus Previous Line
    scope: "/**"
    triggers:
    - "key k"
    actions:
    - "/lineUp"
  - name: line_down
    description: Focus Next Line
    scope: "/**"
    triggers:
    - "key j"
    actions:
    - "/lineDown"
  - name: line_first
    description: Focus First Line
    scope: "/**"
    triggers:
    - "key gg"
    actions:
    - "/lineFirst"
  - name: line_last
    description: Focus Last Line
    scope: "/**"
    triggers:
    - "key G"
    actions:
    - "/lineLast"
  windows:
  - !buffer
    name: head
    value: menu
    height:
      mode: fixed
      fixed: 4
  # - !buffer
  #   name: menusplitter
  #   value: splitter
  #   height:
  #     mode: fixed
  #     fixed: 1
  - !buffer
    name: body
    value: body

- !table
  name: menu
  description: Application menu
  closable: false
  content:
    !list
    value:
    - menu

- !table
  name: sidebar
  description: Sidebar
  closable: false
  content:
    !actionList
    value:
    - displayName: SB
      action: "/root/body/main.replace subscriptions"
    - displayName: RG
      action: "/root/body/main.replace resources"
  columns:
  - name : DisplayName
  bindings:
  - name: run_action
    description: run_selected_action
    triggers:
    - "key <ControlM>"
    actions:
    - "%(line.Action)"



- !hbox
  name: body
  description: Horizontal view with left sidebar and all the rest
  windows:
  - !buffer
    name: sidebar
    value: sidebar
    width:
      mode: fixed
      fixed: 7
  # - !buffer
  #   name: bodysplitter
  #   value: splitter
  #   width:
  #     mode: fixed
  #     fixed: 1
  - !buffer
    name: main
    value: main

- !hbox
  name: main
  description: Main container for content
  # closable: true
  # autoSplitters : false
  bindings:
  - name: focus_right
    description: Focus Right View
    # scope: "/*"
    triggers:
    - "key <ControlY>"
    actions:
    - "./focusRight"
  - name: focus_left
    description: Focus Right View
    scope: "./**"
    triggers:
    - "key <ControlT>"
    actions:
    - "./focusLeft"
  windows:
  - !buffer
    name: subscriptions
    value: subscriptions

{{#complex_buffers}}
{{> buffers/complex_buffer.yml}}
{{/complex_buffers}}

- !dict
  name: resource_details
  description: Details view for resource
  parameters:
  - name: resourceId  
    type: string
    defaultValue: ""
  content:
    !cli
    input: az resource show ?(resourceId:--ids) %(resourceId)
    map: json_object_to_dict
  columns:
  - name : name
    displayName : Name
  - name : kind
    displayName : Kind
  - name : location
    displayName : Az location
